#!/bin/bash 
# Bash Color
green='\e[32m'
red='\e[31m'
yellow='\e[33m'
blue='\e[34m'
lgreen='\e[92m'
lyellow='\e[93m'
lblue='\e[94m'
lmagenta='\e[95m'
lcyan='\e[96m'
blink_red='\033[05;31m'
restore='\033[0m'
reset='\e[0m'

function warning() {
  printf "${red}[ WARNING  ]${reset} $*${reset}\n"
  sleep 1.5
}

function question() {
  printf "${green}[ QUESTION ]${reset} $*${reset}\n"
}

function answer() {
  printf "${lgreen}[${reset}$1${lgreen}]${reset}$2${reset}\n"
}

function info() {
  printf "${yellow}[   INFO   ]${reset} $*${reset}\n"
}

function prompt() {
  printf "${blue}[ WAITING..]: ${reset}"
}

function root_check() {
  if [[ "$EUID" -ne "0" ]];then
    warning "Scripts must be run as root."
    exit 1
  fi
}

function print_color() {
  printf "${green}green${reset}\n${red}red${reset}\n${yellow}yellow${reset}\n${blue}blue${reset}\n${lgreen}lgreen${reset}\n${lyellow}lyellow${reset}\n${lblue}lblue${reset}\n${lmagenta}lmagenta${reset}\n${lcyan}lcyan${reset}\n${blink_red}blink_red${reset}\n"
}

function choice() {
  local nb_choice=$1
  check="0"
  
  prompt
  read -n 1 
  echo -e ""

  REPLY=$(echo $REPLY | tr '[A-Z]' '[a-z]')

  if [[ "$REPLY" == q ]]; then
    info "Good Bye"
    exit 1
  elif [[ "$REPLY" < 1 ]] || [[ "$REPLY" > "$nb_choice" ]]; then
    warning "Wrong Choice"
  else
    check="1"
    return ${REPLY}
  fi
}

function loop() {
  while $loop; do
    `echo $1`
    return_code=$?
    if [[ "$check" == "1" ]]; then
      return ${return_code}
    fi
  done
}

function menu_print() {
  clear
  question "What do you wan't to do ?"
  answer 1 "Install TightVNCServer"
  answer 2 "Copy files in NetworkManager"
  answer 3 "Install kalipi-config"
  answer 4 "Configure SSH server port"
  menu_print_nb_choice="4"
}

function menu() {
  menu_print
  choice ${menu_print_nb_choice}
}

function main() {
  #root_check
  #print_color
  loop "menu"
  echo $?
}

main